import{r as a,c as F,d as v,j as e,H,G as f,h as p,F as $,a7 as B,a5 as G,X as V,Y as q,Z as z,$ as X,a0 as b,a1 as t,a2 as Z,S as J,a6 as K,a9 as ee,U as te,V as se,W as ne,a3 as ae,aa as oe}from"./index-14iq4arv.js";import{h as u}from"./moment-G82_0lEo.js";import{S as le}from"./Search-D10Vqw1G.js";import{A as re}from"./AddFollowingLeads-DoFWmeGb.js";import{P as ie}from"./Pagination-Drt3pWZO.js";const ce=oe(r=>({tableContainer:{maxHeight:"600px"},stickyAction:{position:"sticky",right:0,justifyItems:"center",alignItems:"center",backgroundColor:"#fff",zIndex:1},actionColumnHeader:{position:"sticky",right:0,alignItems:"center",justifyContent:"center",zIndex:2}})),de=r=>{const n=new Date(r),E=n.getDate().toString().padStart(2,"0"),S=(n.getMonth()+1).toString().padStart(2,"0"),i=n.getFullYear();let l=n.getHours();const c=n.getMinutes().toString().padStart(2,"0"),m=l>=12?"PM":"AM";l=l%12,l=l||12;const x=l.toString().padStart(2,"0");return`${E}/${S}/${i} ${x}:${c} ${m}`},ue=()=>{const r=ce(),[n,E]=a.useState([]),[S,i]=a.useState(!1),[l,c]=a.useState(!1),[m,x]=a.useState(""),[R,Y]=a.useState("success"),[j,A]=a.useState(5),[y,N]=a.useState(1),[_,d]=a.useState([]),[T,g]=a.useState(!1),[L,U]=a.useState(),[D,W]=a.useState(!0);a.useEffect(()=>{i(!0),P()},[]);const P=()=>{F.get(`${v.apiUrl}/leads/getleads`).then(s=>{s.data.data.length>0&&(E(s.data.data),d(s.data.data)),i(!1)}).catch(s=>{x("An error occurred while fetching leads data."),c(!0),i(!1)})};a.useEffect(()=>{if(n.length>0){const s=u().format("YYYY-MM-DD"),o=n.filter(h=>u(h.QUERY_TIME).format("YYYY-MM-DD")===s);d(o)}},[n]);const C=()=>{c(!1)},w=()=>{if(D)d(n);else{const s=u().format("YYYY-MM-DD"),o=n.filter(h=>u(h.QUERY_TIME).format("YYYY-MM-DD")===s);d(o)}W(!D),N(1)},I=(y-1)*j,k=y*j,M=_.slice(I,k),O=s=>{if(n.length>0){const o=n.find(h=>h.UNIQUE_QUERY_ID===s);o&&(U(o),g(!0))}},Q=()=>{g(!1),Y("success"),x("Lead followed successfully!"),c(!0)};return e.jsxs("div",{children:[e.jsx("h1",{className:"text-center",children:"Leads Index"}),S?e.jsxs("div",{style:{textAlign:"center",marginTop:"20px"},children:[e.jsx(H,{}),e.jsx("p",{children:"Processing... Please wait."})]}):e.jsxs(e.Fragment,{children:[e.jsxs(f,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(f,{item:!0,xs:3,children:e.jsx(le,{data:n,setData:d})}),e.jsx(f,{item:!0,xs:3,children:e.jsx(p,{variant:"contained",onClick:w,children:D?"Show All Leads":"Show Today's Leads"})}),e.jsx(f,{item:!0,xs:3,children:e.jsx($,{children:e.jsx(B,{value:j,onChange:s=>A(s.target.value),children:[5,10,15,20].map(s=>e.jsxs(G,{value:s,children:[s," per page"]},s))})})})]}),e.jsx(V,{component:q,style:{marginTop:"20px"},children:e.jsxs(z,{children:[e.jsx(X,{children:e.jsxs(b,{children:[e.jsx(t,{style:{fontWeight:"bold"},children:"S.No"}),e.jsx(t,{style:{fontWeight:"bold"},children:"Unique Query ID"}),e.jsx(t,{style:{fontWeight:"bold"},children:"Query Type"}),e.jsx(t,{style:{fontWeight:"bold"},children:"Query Time"}),e.jsx(t,{style:{fontWeight:"bold"},children:"Name"}),e.jsx(t,{style:{fontWeight:"bold"},children:"Mobile No"}),e.jsx(t,{style:{fontWeight:"bold"},children:"Email"}),e.jsx(t,{style:{fontWeight:"bold"},children:"Company Name"}),e.jsx(t,{style:{fontWeight:"bold"},children:"Address"}),e.jsx(t,{style:{fontWeight:"bold"},children:"City"}),e.jsx(t,{style:{fontWeight:"bold"},children:"State"}),e.jsx(t,{style:{fontWeight:"bold"},children:"Pincode"}),e.jsx(t,{style:{fontWeight:"bold"},children:"Country ISO"}),e.jsx(t,{style:{fontWeight:"bold"},children:"Mobile Alt"}),e.jsx(t,{style:{fontWeight:"bold"},children:"Phone"}),e.jsx(t,{style:{fontWeight:"bold"},children:"Phone Alt"}),e.jsx(t,{style:{fontWeight:"bold"},children:"Email Alt"}),e.jsx(t,{style:{fontWeight:"bold"},children:"Product Name"}),e.jsx(t,{style:{fontWeight:"bold"},children:"Message"}),e.jsx(t,{style:{fontWeight:"bold"},children:"Category Name"}),e.jsx(t,{style:{fontWeight:"bold"},children:"Call Duration"}),e.jsx(t,{style:{fontWeight:"bold"},children:"Receiver Mobile"}),e.jsx(t,{className:r.actionColumnHeader,children:"Actions"})]})}),e.jsx(Z,{children:M.length>0?M.map((s,o)=>e.jsxs(b,{children:[e.jsx(t,{children:o+1+I}),e.jsx(t,{children:s.UNIQUE_QUERY_ID}),e.jsx(t,{children:s.QUERY_TYPE}),e.jsx(t,{children:de(s.QUERY_TIME)}),e.jsx(t,{children:s.SENDER_NAME}),e.jsx(t,{children:s.SENDER_MOBILE}),e.jsx(t,{children:s.SENDER_EMAIL}),e.jsx(t,{children:s.SENDER_COMPANY}),e.jsx(t,{children:s.SENDER_ADDRESS}),e.jsx(t,{children:s.SENDER_CITY}),e.jsx(t,{children:s.SENDER_STATE}),e.jsx(t,{children:s.SENDER_PINCODE}),e.jsx(t,{children:s.SENDER_COUNTRY_ISO}),e.jsx(t,{children:s.SENDER_MOBILE_ALT}),e.jsx(t,{children:s.SENDER_PHONE}),e.jsx(t,{children:s.SENDER_PHONE_ALT}),e.jsx(t,{children:s.SENDER_EMAIL_ALT}),e.jsx(t,{children:s.QUERY_PRODUCT_NAME}),e.jsx(t,{children:s.QUERY_MESSAGE}),e.jsx(t,{children:s.QUERY_MCAT_NAME}),e.jsx(t,{children:s.CALL_DURATION}),e.jsx(t,{children:s.RECEIVER_MOBILE}),e.jsx(t,{className:r.stickyAction,children:e.jsx(p,{onClick:()=>O(s.UNIQUE_QUERY_ID),children:"Follow"})})]},s.UNIQUE_QUERY_ID)):e.jsx(b,{children:e.jsx(t,{colSpan:23,style:{textAlign:"center"},children:"No leads found."})})})]})}),e.jsx(J,{spacing:2,style:{marginTop:"20px"},children:e.jsx(ie,{count:Math.ceil(_.length/j),page:y,onChange:(s,o)=>N(o),variant:"outlined",shape:"rounded",color:"primary"})})]}),e.jsx(K,{open:l,autoHideDuration:3e3,onClose:C,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:e.jsx(ee,{onClose:C,severity:R,sx:{width:"100%"},children:m})}),e.jsxs(te,{open:T,onClose:()=>g(!1),fullWidth:!0,maxWidth:"md",children:[e.jsx(se,{children:"Follow Lead"}),e.jsx(ne,{children:e.jsx(re,{leadData:L,onSuccess:Q})}),e.jsx(ae,{children:e.jsx(p,{onClick:()=>g(!1),color:"primary",children:"Cancel"})})]})]})};export{ue as default};
