import{r as c,j as e,G as t,a4 as o,aq as C,ar as m,h as v,a6 as N,a9 as R,c as D,d as T}from"./index-14iq4arv.js";const W=({onClose:k,leadData:i,onSuccess:E})=>{const[r,_]=c.useState({emp_id:sessionStorage.getItem("emp_id")||"",leads_id:"",leads_name:"",leads_mobile:"",leads_email:"",leads_company:"",leads_address:"",leads_state:"",leads_city:"",product_name:"",Call_Discussion:"",call_Attended:"Not Attended",remember:"No",reminder_date:"",Description:""}),[a,h]=c.useState({}),[g,u]=c.useState(!1),[f,x]=c.useState(""),[S,b]=c.useState("success");c.useEffect(()=>{i&&_(l=>({...l,leads_id:i.UNIQUE_QUERY_ID||"",leads_name:i.SENDER_NAME||"",leads_mobile:i.SENDER_MOBILE||"",leads_email:i.SENDER_EMAIL||"",leads_company:i.SENDER_COMPANY||"",leads_address:i.SENDER_ADDRESS||"",leads_state:i.SENDER_STATE||"",leads_city:i.SENDER_CITY||"",product_name:i.QUERY_PRODUCT_NAME||""}))},[i]);const n=l=>{const{name:s,value:d}=l.target,y=p(s,d);_({...r,[s]:d||""}),h({...a,[s]:y})},p=(l,s)=>{let d="";return l==="leads_name"&&s&&!/^[a-zA-Z\s]*$/.test(s)&&(d="Enter only letters"),l==="leads_mobile"&&s&&!/^[-+,\d]*$/.test(s)&&(d="Enter a valid phone number (can include +, -, ,)"),l==="leads_email"&&s&&!/\S+@\S+\.\S+/.test(s)&&(d="Enter a valid email address"),l==="Call_Discussion"&&r.call_Attended==="Attended"&&!s&&(d="Call Discussion is required if Call Attended is Attended"),l==="reminder_date"&&r.remember==="Yes"&&!s&&(d="Reminder Date is required if Remember is Yes"),d},A=async()=>{const l={};if(Object.keys(r).forEach(s=>{const d=p(s,r[s]);d&&(l[s]=d)}),Object.keys(l).length>0){h(l);return}try{const s=await D.post(`${T.apiUrl}/leads/following-leads`,r);x(s.data.message),b("success"),u(!0),E()}catch{x("Failed to submit lead data"),b("error"),u(!0)}},j=()=>{u(!1)};return e.jsxs("div",{children:[e.jsx("h1",{className:"text-center",children:"Follow Leads"}),e.jsxs(t,{container:!0,spacing:3,children:[e.jsx(t,{item:!0,xs:6,children:e.jsx(o,{fullWidth:!0,name:"leads_name",label:"Lead Name",value:r.leads_name||"",onChange:n,error:!!a.leads_name,helperText:a.leads_name})}),e.jsx(t,{item:!0,xs:6,children:e.jsx(o,{fullWidth:!0,name:"leads_mobile",label:"Lead Mobile",value:r.leads_mobile||"",onChange:n,error:!!a.leads_mobile,helperText:a.leads_mobile})}),e.jsx(t,{item:!0,xs:6,children:e.jsx(o,{fullWidth:!0,name:"leads_email",label:"Lead Email",value:r.leads_email||"",onChange:n,error:!!a.leads_email,helperText:a.leads_email})}),e.jsx(t,{item:!0,xs:6,children:e.jsx(o,{fullWidth:!0,name:"leads_company",label:"Lead Company",value:r.leads_company||"",onChange:n,error:!!a.leads_company,helperText:a.leads_company})}),e.jsx(t,{item:!0,xs:6,children:e.jsx(o,{fullWidth:!0,name:"leads_address",label:"Lead Address",value:r.leads_address||"",onChange:n,error:!!a.leads_address,helperText:a.leads_address})}),e.jsx(t,{item:!0,xs:6,children:e.jsx(o,{fullWidth:!0,name:"leads_state",label:"Lead State",value:r.leads_state||"",onChange:n,error:!!a.leads_state,helperText:a.leads_state})}),e.jsx(t,{item:!0,xs:6,children:e.jsx(o,{fullWidth:!0,name:"leads_city",label:"Lead City",value:r.leads_city||"",onChange:n,error:!!a.leads_city,helperText:a.leads_city})}),e.jsx(t,{item:!0,xs:6,children:e.jsx(o,{fullWidth:!0,name:"product_name",label:"Product Name",value:r.product_name||"",onChange:n,error:!!a.product_name,helperText:a.product_name})}),e.jsx(t,{item:!0,xs:6,children:e.jsxs(C,{value:r.call_Attended,exclusive:!0,onChange:(l,s)=>{s!==null&&n({target:{name:"call_Attended",value:s}})},"aria-label":"Call Attended",children:[e.jsx(m,{value:"Attended","aria-label":"Call Attended",children:"Call Attended"}),e.jsx(m,{value:"Not Attended","aria-label":"Call Not Attended",children:"Call Not Attended"})]})}),r.call_Attended==="Attended"&&e.jsxs(e.Fragment,{children:[e.jsx(t,{item:!0,xs:6,children:e.jsx(o,{fullWidth:!0,name:"Call_Discussion",label:"Call Discussion",value:r.Call_Discussion||"",onChange:n,error:!!a.Call_Discussion,helperText:a.Call_Discussion,multiline:!0,rows:2})}),e.jsx(t,{item:!0,xs:6,children:e.jsxs(C,{label:"Remember",value:r.remember,exclusive:!0,onChange:(l,s)=>{s!==null&&n({target:{name:"remember",value:s}})},"aria-label":"Remember",children:[e.jsx(m,{value:"Yes","aria-label":"Remember Yes",children:"Remember"}),e.jsx(m,{value:"No","aria-label":"Remember No",children:"Not Remember"})]})}),r.remember==="Yes"&&e.jsx(t,{item:!0,xs:6,children:e.jsx(o,{fullWidth:!0,name:"reminder_date",label:"Reminder Date",type:"date",value:r.reminder_date||"",onChange:n,error:!!a.reminder_date,helperText:a.reminder_date,InputLabelProps:{shrink:!0}})})]}),e.jsx(t,{item:!0,xs:12,children:e.jsx(o,{fullWidth:!0,name:"Description",label:"Description",value:r.Description||"",onChange:n,error:!!a.Description,helperText:a.Description,multiline:!0,rows:4})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(v,{variant:"contained",color:"primary",onClick:A,children:"Submit"})})]}),e.jsx(N,{open:g,autoHideDuration:6e3,onClose:j,children:e.jsx(R,{onClose:j,severity:S,children:f})})]})};export{W as A};
