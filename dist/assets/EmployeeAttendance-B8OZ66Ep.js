import{x as M,y as E,j as e,r as n,an as d,ao as z,Y as F,T as j,B as o,a4 as v,a5 as H,h as J,H as f,Z as y,$ as g,a0 as s,a1 as t,a2 as b,ak as W,g as I,ap as N,c as _,d as D}from"./index-14iq4arv.js";var u={},U=E;Object.defineProperty(u,"__esModule",{value:!0});var S=u.default=void 0,G=U(M()),Z=e;S=u.default=(0,G.default)((0,Z.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");var x={},K=E;Object.defineProperty(x,"__esModule",{value:!0});var R=x.default=void 0,Q=K(M()),V=e;R=x.default=(0,Q.default)((0,V.jsx)("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess");const w=()=>{const[T,C]=n.useState([]),[Y,p]=n.useState(!1),[r,A]=n.useState(d().format("MM")),[i,B]=n.useState(d().format("YYYY")),[h,$]=n.useState({}),[c,P]=n.useState({}),L=[{value:"01",label:"January"},{value:"02",label:"February"},{value:"03",label:"March"},{value:"04",label:"April"},{value:"05",label:"May"},{value:"06",label:"June"},{value:"07",label:"July"},{value:"08",label:"August"},{value:"09",label:"September"},{value:"10",label:"October"},{value:"11",label:"November"},{value:"12",label:"December"}],m=async()=>{p(!0);try{const a=await _.get(`${D.apiUrl}/emp_attend/monthly-attendance`,{params:{month:r,year:i}});C(a.data)}catch(a){console.error("Error fetching attendance data",a)}finally{p(!1)}},O=async a=>{try{const l=await _.get(`${D.apiUrl}/emp_attend/employee-attendance/${a}`,{params:{month:r,year:i}});P(q=>({...q,[a]:l.data}))}catch(l){console.error("Error fetching employee attendance details",l)}},k=a=>{$(l=>({...l,[a]:!l[a]})),c[a]||O(a)};return n.useEffect(()=>{m()},[r,i]),e.jsx(z,{maxWidth:"md",children:e.jsxs(F,{style:{padding:"30px",marginTop:"20px"},children:[e.jsx(j,{variant:"h1",align:"center",marginBottom:"40px",gutterBottom:!0,children:"Monthly Attendance Report"}),e.jsxs(o,{display:"flex",justifyContent:"space-between",marginBottom:"20px",children:[e.jsx(v,{select:!0,label:"Select Month",value:r,onChange:a=>A(a.target.value),style:{marginRight:"10px",minWidth:"200px"},children:L.map(a=>e.jsx(H,{value:a.value,children:a.label},a.value))}),e.jsx(v,{label:"Select Year",type:"number",value:i,onChange:a=>B(a.target.value),style:{marginRight:"10px",minWidth:"200px"},inputProps:{min:2e3,max:d().year()}}),e.jsx(J,{variant:"contained",onClick:m,children:"Get Report"})]}),Y?e.jsx(o,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"300px",children:e.jsx(f,{})}):e.jsxs(y,{children:[e.jsx(g,{children:e.jsxs(s,{children:[e.jsx(t,{children:"Employee Name"}),e.jsx(t,{children:"Total Present"}),e.jsx(t,{children:"Total Absent"}),e.jsx(t,{children:"Total Office Leave"}),e.jsx(t,{children:"Date-wise Details"})]})}),e.jsx(b,{children:T.map(a=>e.jsxs(W.Fragment,{children:[e.jsxs(s,{children:[e.jsx(t,{children:a.emp_name}),e.jsx(t,{children:a.total_present}),e.jsx(t,{children:a.total_absent}),e.jsx(t,{children:a.total_office_leave}),e.jsx(t,{children:e.jsx(I,{onClick:()=>k(a.emp_id),children:h[a.emp_id]?e.jsx(R,{}):e.jsx(S,{})})})]}),e.jsx(s,{children:e.jsx(t,{colSpan:5,style:{paddingBottom:0,paddingTop:0},children:e.jsx(N,{in:h[a.emp_id],timeout:"auto",unmountOnExit:!0,children:e.jsxs(o,{margin:1,children:[e.jsxs(j,{variant:"h6",children:["Attendance Details for ",a.emp_name]}),c[a.emp_id]?e.jsxs(y,{size:"small",children:[e.jsx(g,{children:e.jsxs(s,{children:[e.jsx(t,{children:"Date"}),e.jsx(t,{children:"Status"})]})}),e.jsx(b,{children:c[a.emp_id].map(l=>e.jsxs(s,{children:[e.jsx(t,{children:d(l.dateandtime).format("YYYY-MM-DD")}),e.jsx(t,{children:l.status})]},l.dateandtime))})]}):e.jsx(f,{})]})})})})]},a.emp_id))})]})]})})};export{w as default};
